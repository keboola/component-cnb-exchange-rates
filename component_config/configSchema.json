{
  "type": "object",
  "properties": {
    "date_settings": {
      "title": "Date settings",
      "type": "object",
      "properties": {
        "dates": {
            "type": "string",
            "title": "Range of dates",
            "enum": [
              "Current day (currently declared rates)",
              "Current day and yesterday",
              "Week",
              "Custom date range"
            ],
            "default": "Current day and yesterday"
        },
        "dependent_date_from": {
          "title": "Date from",
          "type": "string",
          "format": "date",
          "options": {
            "flatpickr": {},
            "dependencies": {
              "dates": "Custom date range"
            }
          }
        },
        "dependent_date_to": {
          "title": "Date to",
          "type": "string",
          "format": "date",
          "options": {
            "flatpickr": {},
            "dependencies": {
              "dates": "Custom date range"
            }
          }
        },
        "current_as_today": {
          "type": "boolean",
          "format": "checkbox",
          "title": "Current rates as today's rates",
          "description": "By checking this box actual exchange rates will be considered as exchange rates for the current day (Exchange rates for current day are declared every working day after 2.30 p.m. CET). Please use this option together with incremental load so the current rates can be updated on the next run.",
          "default": true
        },
        "default_timezone": {
          "title": "Default timezone",
          "type": "string",
          "template": "Europe/Prague",
          "description": "</br></br>"
        }
      },
      "propertyOrder": 3
    },
    "currencies": {
      "title": "Currency settings",
      "type": "object",
      "required": [
        "selected_currencies"
      ],
      "properties": {
        "selected_currencies": {
          "type": "array",
          "items": {
            "enum": [],
            "type": "string"
          },
          "title": "Select currencies",
          "format": "select",
          "options": {
            "async": {
              "label": "List currencies",
              "action": "list_currencies",
              "autoload": [
                "parameters.currencies.selected_currencies"
              ]
            }
          },
          "description": "Select the currencies you want to extract.",
          "uniqueItems": true
        }
      },
      "uniqueItems": true,
      "propertyOrder": 2
    },
    "destination": {
      "title": "Destination",
      "type": "object",
      "required": [
        "file_name",
        "incremental"
      ],
      "properties": {
        "file_name": {
          "type": "string",
          "title": "Table name",
          "description": "Only alphanumeric characters, dash and underscores are allowed.</br>Your data will be extracted to in.c-cnb-extractor.{your table name}",
          "options": {
            "inputAttributes": {
                  "placeholder": "your table name"
                }
          }
        },
        "incremental": {
          "enum": [
            "full_load",
            "incremental_load"
          ],
          "type": "string",
          "title": "Load Type",
          "format": "checkbox",
          "default": "full_load",
          "options": {
            "enum_titles": [
              "Full Load",
              "Incremental Load"
            ]
          },
          "description": "If Full load is used, the destination table will be overwritten every run. If incremental load is used, data will be upserted into the destination table. Tables with a primary key will have rows updated, tables without a primary key will have rows appended."
        }
      },
    "propertyOrder": 1
    }
  }
}
